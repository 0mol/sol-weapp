"use strict";function _typeof2(t){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof2(module))?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))?exports.cax=e():t.cax=e()}("undefined"!=typeof self?self:void 0,function(){return r={},i.m=n=[function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o,a=n(4);var s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,((o=a)&&o.__esModule?o:{default:o}).default),i(u,[{key:"draw",value:function(){}},{key:"render",value:function(t){this.clear(),this.draw(),function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"render",this).call(this,t)}}]),u);function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}e.default=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o,a=n(3);var s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,((o=a)&&o.__esModule?o:{default:o}).default),i(u,[{key:"add",value:function(t){for(var e=arguments.length,n=0;n<e;n++){var i=arguments[n],r=i.parent;r&&r.removeChildAt(r.children.indexOf(i)),this.children.push(i),i.parent=this}}},{key:"addChildAt",value:function(t,e){var n=t.parent;n&&n.removeChildAt(n.children.indexOf(t)),(t.parent=this).children.splice(e,0,t)}},{key:"removeChildAt",value:function(t){var e=this.children[t];e&&(e.parent=null),this.children.splice(t,1)}},{key:"replace",value:function(t,e){var n=e.parent.children.indexOf(e);this.removeChildAt(n),this.addChildAt(t,n)}},{key:"remove",value:function(t){for(var e=arguments.length,n=this.children.length,i=0;i<e;i++)for(var r=0;r<n;r++)t.id===this.children[r].id&&(t.parent=null,this.children.splice(r,1),r--,n--)}},{key:"empty",value:function(){this.children.forEach(function(t){t.parent=null}),this.children.length=0}},{key:"destroy",value:function(){this.empty(),this.parent&&function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"destroy",this).call(this)}}]),u);function u(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,t));return e.children=[],e}e.default=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=s(n(3)),a=s(n(9));function s(t){return t&&t.__esModule?t:{default:t}}var u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,o.default),i(c,[{key:"clone",value:function(){var t=new c("string"==typeof this.img?this.img:this.img.src);return t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.skewX=this.skewX,t.skewY=this.skewY,t.originX=this.originX,t.originY=this.originY,t.width=this.width,t.height=this.height,t.cursor=this.cursor,t}}]),c);function c(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));return"string"==typeof e?c.cache[e]?(a.default.isWeapp?(i.img=c.cache[e].img,i.rect=[0,0,c.cache[e].width,c.cache[e].height],i.width=i.rect[2],i.height=i.rect[3]):(i.img=c.cache[e],i.rect=[0,0,i.img.width,i.img.height],i.width=i.img.width,i.height=i.img.height),n&&n.call(i)):a.default.isWeapp?a.default.getImageInWx(e,function(t){i.img=t.img,i.rect||(i.rect=[0,0,t.width,t.height]),i.width=t.width,i.height=t.height,n&&n.call(i),c.cache[e]=t}):(i.img=a.default.isWegame?wx.createImage():new window.Image,i.visible=!1,i.img.onload=function(){i.visible=!0,i.rect||(i.rect=[0,0,i.img.width,i.img.height]),i.width=i.img.width,i.height=i.img.height,n&&n.call(i),c.cache[e]=i.img},i.img.src=e):(i.img=e,i.rect=[0,0,e.width,e.height],i.width=e.width,i.height=e.height,c.cache[e.src]=e),i}u.cache={},e.default=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=u(n(21)),o=u(n(22)),s=u(n(23));function u(t){return t&&t.__esModule?t:{default:t}}var c=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,o.default),i(l,[{key:"isVisible",value:function(){return this.visible&&0<this.alpha&&0!==this.scaleX&&0!==this.scaleY}},{key:"initAABB",value:function(){if(void 0!==this.width&&void 0!==this.height){var t=void 0,e=void 0,n=this.width,i=this.height,r=this._matrix,o=n*r.a,a=n*r.b,s=i*r.c,u=i*r.d,c=r.tx,l=r.ty,h=c,f=c,p=l,d=l;(t=o+c)<h?h=t:f<t&&(f=t),(t=o+s+c)<h?h=t:f<t&&(f=t),(t=s+c)<h?h=t:f<t&&(f=t),(e=a+l)<p?p=e:d<e&&(d=e),(e=a+u+l)<p?p=e:d<e&&(d=e),(e=u+l)<p?p=e:d<e&&(d=e),this.AABB=[h,p,f-h,d-p],this.rectPoints=[{x:c,y:l},{x:o+c,y:a+l},{x:o+s+c,y:a+u+l},{x:s+c,y:u+l}]}}},{key:"destroy",value:function(){this.parent.remove(this)}},{key:"hover",value:function(t,e,n){this.on("mouseover",t),this.on("mouseout",e),n&&this.on("mousemove",n)}},{key:"clip",value:function(t,e){this.clipGraphics=t,this.clipRuleNonzero=!e}},{key:"unclip",value:function(){this.clipGraphics=null}},{key:"absClip",value:function(t,e){this.absClipGraphics=t,this.absClipRuleNonzero=!e}},{key:"unAbsClip",value:function(){this.absClipGraphics=null}},{key:"cache",value:function(t,e,n,i,r,o){this._cacheData={x:t||0,y:e||0,width:n||this.width,height:i||this.height,scale:r||1},this.cacheUpdating=o,this.cacheCanvas||("undefined"!=typeof wx&&wx.createCanvas?this.cacheCanvas=wx.createCanvas():this.cacheCanvas=document.createElement("canvas"),this.cacheCtx=this.cacheCanvas.getContext("2d")),this.cacheCanvas.width=this._cacheData.width*this._cacheData.scale,this.cacheCanvas.height=this._cacheData.height*this._cacheData.scale,this._readyToCache=!0}},{key:"uncache",value:function(){this.cacheCanvas=null}},{key:"filter",value:function(t,e){e=Object.assign({},{x:0,y:0,width:this.width,height:this.height},e),this.cache(e.x,e.y,e.width,e.height),this._readyToFilter=!0,this._filterName=t}},{key:"setTransform",value:function(t,e,n,i,r,o,a,s,u){this.x=t||0,this.y=e||0,this.scaleX=null==n?1:n,this.scaleY=null==i?1:i,this.rotation=r||0,this.skewX=o||0,this.skewY=a||0,this.originX=s||0,this.originY=u||0}},{key:"setMatrix",value:function(t,e,n,i,r,o){a.default.decompose(t,e,n,i,r,o,this)}},{key:"unfilter",value:function(){this.uncache()}},{key:"_getStage",value:function(){for(var t=this;t.parent;)t=t.parent;return"Stage"===t.___instanceof?t:null}}]),l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));t.alpha=t.complexAlpha=t.scaleX=t.scaleY=1,t.x=t.y=t.rotation=t.skewX=t.skewY=t.originX=t.originY=0,t.cursor=null,t.visible=!0,t._matrix=new a.default,t._hitMatrix=new a.default,t.id=s.default.get(),t.clipGraphics=null,t.clipRuleNonzero=!0,t.fixed=!1,t.shadow=null,t.compositeOperation=null,t.absClipGraphics=null,t.absClipRuleNonzero=!0,t.cacheUpdating=!1;try{Object.defineProperties(t,{stage:{get:t._getStage},scale:{get:function(){return this.scaleX},set:function(t){this.scaleX=this.scaleY=t}}})}catch(t){}return t}e.default=c},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o,a=n(3),s=(o=a)&&o.__esModule?o:{default:o};var u={fillStyle:!0,strokeStyle:!0,lineWidth:!0,lineCap:!0,lineDashOffset:!0,lineJoin:!0,miterLimit:!0},c=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,s.default),i(l,[{key:"clearRect",value:function(){return this.cmds.push(["clearRect",arguments]),this}},{key:"rect",value:function(){return this.cmds.push(["rect",arguments]),this}},{key:"clear",value:function(){return this.cmds.length=0,this}},{key:"setLineDash",value:function(){return this.cmds.push(["setLineDash",arguments]),this}},{key:"strokeRect",value:function(){return this.cmds.push(["strokeRect",arguments]),this}},{key:"fillRect",value:function(){return this.cmds.push(["fillRect",arguments]),this}},{key:"beginPath",value:function(){return this.cmds.push(["beginPath",arguments]),this}},{key:"arc",value:function(){return this.cmds.push(["arc",arguments]),this}},{key:"closePath",value:function(){return this.cmds.push(["closePath",arguments]),this}},{key:"fillStyle",value:function(){return this.cmds.push(["fillStyle",arguments]),this}},{key:"fill",value:function(){return this.cmds.push(["fill",arguments]),this}},{key:"strokeStyle",value:function(){return this.cmds.push(["strokeStyle",arguments]),this}},{key:"lineWidth",value:function(){return this.cmds.push(["lineWidth",arguments]),this}},{key:"lineCap",value:function(){return this.cmds.push(["lineCap",arguments]),this}},{key:"lineDashOffset",value:function(){return this.cmds.push(["lineDashOffset",arguments]),this}},{key:"lineJoin",value:function(){return this.cmds.push(["lineJoin",arguments]),this}},{key:"miterLimit",value:function(){return this.cmds.push(["miterLimit",arguments]),this}},{key:"stroke",value:function(){return this.cmds.push(["stroke",arguments]),this}},{key:"moveTo",value:function(){return this.cmds.push(["moveTo",arguments]),this}},{key:"lineTo",value:function(){return this.cmds.push(["lineTo",arguments]),this}},{key:"bezierCurveTo",value:function(){return this.cmds.push(["bezierCurveTo",arguments]),this}},{key:"quadraticCurveTo",value:function(){return this.cmds.push(["quadraticCurveTo",arguments]),this}},{key:"createRadialGradient",value:function(){return this.cmds.push(["createRadialGradient",arguments]),this}},{key:"createLinearGradient",value:function(){return this.cmds.push(["createLinearGradient",arguments]),this}},{key:"addColorStop",value:function(){return this.cmds.push(["addColorStop",arguments]),this}},{key:"fillGradient",value:function(){return this.cmds.push(["fillGradient"]),this}},{key:"arcTo",value:function(){return this.cmds.push(["arcTo",arguments]),this}},{key:"render",value:function(i){var r=this;this.cmds.forEach(function(t){var e=t[0];if(u[e])i[e]=t[1][0];else if("addColorStop"===e)r.currentGradient&&r.currentGradient.addColorStop(t[1][0],t[1][1]);else if("fillGradient"===e)i.fillStyle=r.currentGradient;else{var n=i[e].apply(i,Array.prototype.slice.call(t[1]));"createRadialGradient"!==e&&"createLinearGradient"!==e||(r.currentGradient=n)}})}}]),l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return t.cmds=[],t.currentGradient=null,t}e.default=c},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=s(n(3)),a=s(n(9));function s(t){return t&&t.__esModule?t:{default:t}}var u=void 0;a.default.isWeapp?u=wx.createCanvasContext("measure0"):"undefined"!=typeof document&&(u=document.createElement("canvas").getContext("2d"));var c=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,o.default),i(l,[{key:"getWidth",value:function(){return u||a.default.isWegame&&(u=wx.createCanvas().getContext("2d")),this.font&&(u.font=this.font),u.measureText(this.text).width}}]),l);function l(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return n.text=t,e=e||{},n.font=e.font||"10px sans-serif",n.color=e.color||"black",n.textAlign=e.textAlign||"left",n.baseline=e.baseline||"top",n}e.default=c},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=a(n(3)),u=a(n(9)),c=a(n(2));function a(t){return t&&t.__esModule?t:{default:t}}var s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,o.default),i(l,[{key:"play",value:function(){this.paused=!1}},{key:"pause",value:function(){this.paused=!0}},{key:"reset",value:function(){this.currentFrameIndex=0,this.animationFrameIndex=0}},{key:"updateFrame",value:function(){if(!this.paused){var t=this.option;this.dt=Date.now()-this.startTime;var e=t.animations[this.currentAnimation].frames,n=e.length,i=Math.floor(this.dt/this.interval%n);this.rect=t.frames[e[i]];var r=this.rect.length;if(4<r&&(this.originX=this.rect[2]*this.rect[4]),5<r&&(this.originY=this.rect[3]*this.rect[5]),6<r){var o=this.option.imgs[this.rect[6]];this.img="string"==typeof o?this.imgMap[o]:o}i===n-1&&(!this.endTime||Date.now()-this.endTime>this.interval)&&(this.endTime=Date.now(),this.animationEnd(),this._willDestroy&&this.destroy())}}},{key:"gotoAndPlay",value:function(t){this.paused=!1,this.reset(),this.currentAnimation=t,this.startTime=Date.now()}},{key:"gotoAndStop",value:function(t){this.reset(),this.paused=!0,this.currentAnimation=t;var e=this.option,n=e.animations[this.currentAnimation].frames;this.rect=e.frames[n[this.animationFrameIndex]];var i=this.rect;this.width=i[2],this.height=i[3];var r=i.length;if(4<r&&(this.originX=i[2]*i[4]),5<r&&(this.originY=i[3]*i[5]),6<r){var o=this.option.imgs[i[6]];this.img="string"==typeof o?this.imgMap[o]:o}}},{key:"gotoAndPlayOnce",value:function(t){this.gotoAndPlay(t),this._willDestroy=!0}}]),l);function l(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));n.option=t;var i=n.option.imgs.length,r=0,o=n.option.imgs[0];if(n.imgMap={},u.default.isWeapp)n.option.imgs.forEach(function(e){u.default.getImageInWx(e,function(t){n.imgMap[e]=t.img,++r===i&&(n.img=n.imgMap[o],n.rect=[0,0,0,0])})});else if("string"==typeof o){var a=n.option.imgs.length,s=0;n.option.imgs.forEach(function(t){if(c.default.cache[t])n.imgMap[t]=c.default.cache[t],++s===a&&(n.img=n.imgMap[o],n.rect=[0,0,0,0]);else{var e=u.default.isWegame?wx.createImage():new window.Image;e.onload=function(){n.imgMap[t]=e,++s===a&&(n.img=n.imgMap[o],n.rect=[0,0,0,0]),c.default.cache[t]=e},e.src=t}})}else o instanceof c.default?(n.rect=[0,0,0,0],n.img=o.img):(n.rect=[0,0,0,0],n.img=o);return n.x=t.x||0,n.y=t.y||0,n.currentFrameIndex=0,n.animationFrameIndex=0,n.currentAnimation=t.currentAnimation||null,n.interval=1e3/t.framerate,n.paused=!1,n.animationEnd=t.animationEnd||function(){},n.currentAnimation&&(t.playOnce?n.gotoAndPlayOnce(n.currentAnimation):n.gotoAndPlay(n.currentAnimation)),n}e.default=s},function(t,e,n){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,"__esModule",{value:!0});var r=(function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}(o,[{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"preventDefault",value:function(){this.pureEvent.preventDefault()}}]),o);function o(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.propagationStopped=!1,this.stageX=null,this.stageY=null,this.pureEvent=null}e.default=r},function(t,e,n){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,"__esModule",{value:!0});var r=(function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}(o,[{key:"render",value:function(){}},{key:"renderGraphics",value:function(){}},{key:"clear",value:function(){}}]),o);function o(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o)}e.default=r},function(t,r,e){(function(t){Object.defineProperty(r,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return _typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)};function n(e,n){-1===e.indexOf("https://")&&-1===e.indexOf("http://")||0===e.indexOf("http://tmp/")?wx.getImageInfo({src:e,success:function(t){n({img:e,width:t.width,height:t.height})}}):wx.downloadFile({url:e,success:function(e){200===e.statusCode&&wx.getImageInfo({src:e.tempFilePath,success:function(t){n({img:e.tempFilePath,width:t.width,height:t.height})}})}})}r.getImageInWx=n;var i="object"===(void 0===t?"undefined":e(t))&&t&&t.Math===Math&&t.Array===Array?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:function(){return this}();r.default={getImageInWx:n,root:i,isWeapp:"undefined"!=typeof wx&&!wx.createCanvas,isWegame:"undefined"!=typeof wx&&wx.createCanvas}}).call(r,e(25))},function(o,a,t){(function(e){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}var n="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return _typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)};t.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(t=void 0!==t?t:s.now();0<n.length;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var r=this._tweens[n[i]];r&&!1===r.update(t)&&(r._isPlaying=!1,e||delete this._tweens[n[i]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var i,r,s=new t;s.Group=t,s._nextId=0,s.nextId=function(){return s._nextId++},"undefined"==typeof window&&void 0!==e?"undefined"!=typeof wx?s.now=Date.now:s.now=function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?s.now=window.performance.now.bind(window.performance):void 0!==Date.now?s.now=Date.now:s.now=function(){return(new Date).getTime()},s.Tween=function(t,e){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=s.Easing.Linear.None,this._interpolationFunction=s.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||s,this._id=s.nextId(),this._paused=!1,this._passTime=null},s.Tween.prototype={getId:function(){return this._id},toggle:function(){this._paused?this.play():this.pause()},pause:function(){this._paused=!0;var t=s.now();this._passTime=t-this._startTime},play:function(){this._paused=!1;var t=s.now();this._startTime=t-this._passTime},isPlaying:function(){return this._isPlaying},to:function(t,e){return this._valuesEnd=t,void 0!==e&&(this._duration=e),this},start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?s.now()+parseFloat(t):t:s.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],this._valuesStart[e]instanceof Array==!1&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying&&(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens()),this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){if(this._paused)return!0;var e,n,i;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(t-this._startTime)/this._duration,n=0===this._duration||1<n?1:n,i=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[e]){var r=this._valuesStart[e]||0,o=this._valuesEnd[e];o instanceof Array?this._object[e]=this._interpolationFunction(o,i):("string"==typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?r+parseFloat(o):parseFloat(o)),"number"==typeof o&&(this._object[e]=r+(o-r)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1!==n)return!0;if(0<this._repeat){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var a=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=a}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,u=this._chainedTweens.length;s<u;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}},s.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)}},Bounce:{In:function(t){return 1-s.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*s.Easing.Bounce.In(2*t):.5*s.Easing.Bounce.Out(2*t-1)+.5}}},s.Interpolation={Linear:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=s.Interpolation.Utils.Linear;return e<0?o(t[0],t[1],i):1<e?o(t[n],t[n-1],n-i):o(t[r],t[n<r+1?n:r+1],i-r)},Bezier:function(t,e){for(var n=0,i=t.length-1,r=Math.pow,o=s.Interpolation.Utils.Bernstein,a=0;a<=i;a++)n+=r(1-e,i-a)*r(e,a)*t[a]*o(i,a);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=s.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(r=Math.floor(i=n*(1+e))),o(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-i)-t[0]):1<e?t[n]-(o(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):o(t[r?r-1:0],t[r],t[n<r+1?n:r+1],t[n<r+2?n:r+2],i-r)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=s.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:(i=[1],function(t){var e=1;if(i[t])return i[t];for(var n=t;1<n;n--)e*=n;return i[t]=e}),CatmullRom:function(t,e,n,i,r){var o=.5*(n-t),a=.5*(i-e),s=r*r;return(2*e-2*n+o+a)*(r*s)+(-3*e+3*n-2*o-a)*s+o*r+e}}},(r=void 0)!==o&&"object"===n(a)?o.exports=s:void 0!==r&&(r.TWEEN=s)}).call(a,t(17))},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o,a=n(10),h=(o=a)&&o.__esModule?o:{default:o},s=n(12);var u=(i(c,[{key:"to",value:function(t,e,n){if(this.cmds.push(["to"]),0!==arguments.length)for(var i in t)this.set(i,t[i],e||0,n);return this}},{key:"set",value:function(t,e,n,i){return this.cmds[this.cmds.length-1].push([t,[e,n,i]]),this}},{key:"x",value:function(){return this.cmds[this.cmds.length-1].push(["x",arguments]),this}},{key:"y",value:function(){return this.cmds[this.cmds.length-1].push(["y",arguments]),this}},{key:"z",value:function(){return this.cmds[this.cmds.length-1].push(["z",arguments]),this}},{key:"rotation",value:function(){return this.cmds[this.cmds.length-1].push(["rotation",arguments]),this}},{key:"scaleX",value:function(){return this.cmds[this.cmds.length-1].push(["scaleX",arguments]),this}},{key:"scaleY",value:function(){return this.cmds[this.cmds.length-1].push(["scaleY",arguments]),this}},{key:"skewX",value:function(){return this.cmds[this.cmds.length-1].push(["skewX",arguments]),this}},{key:"skewY",value:function(){return this.cmds[this.cmds.length-1].push(["skewY",arguments]),this}},{key:"originX",value:function(){return this.cmds[this.cmds.length-1].push(["originX",arguments]),this}},{key:"originY",value:function(){return this.cmds[this.cmds.length-1].push(["originY",arguments]),this}},{key:"alpha",value:function(){return this.cmds[this.cmds.length-1].push(["alpha",arguments]),this}},{key:"begin",value:function(t){return this.cmds[this.cmds.length-1].begin=t,this}},{key:"progress",value:function(t){return this.cmds[this.cmds.length-1].progress=t,this}},{key:"end",value:function(t){return this.cmds[this.cmds.length-1].end=t,this}},{key:"wait",value:function(){return this.cmds.push(["wait",arguments]),this}},{key:"then",value:function(){return this.cmds.push(["then",arguments]),this}},{key:"cycle",value:function(){return this.cmds.push(["cycle",arguments]),this}},{key:"start",value:function(){if(!this._pause){var t=this.cmds.length;return this.index<t?this.exec(this.cmds[this.index],this.index===t-1):(0,s.clearRafInterval)(this.loop),this}}},{key:"pause",value:function(){this._pause=!0;for(var t=0,e=this.tweens.length;t<e;t++)this.tweens[t].pause();"wait"===this.currentTask&&(this.timeout-=new Date-this.currentTaskBegin,this.currentTaskBegin=new Date)}},{key:"toggle",value:function(){this._pause?this.play():this.pause()}},{key:"play",value:function(){this._pause=!1;for(var t=0,e=this.tweens.length;t<e;t++)this.tweens[t].play();var n=this;"wait"===this.currentTask&&setTimeout(function(){n._pause||(n.index++,n.start(),n.index===n.cmds.length&&n.complete&&n.complete())},this.timeout)}},{key:"stop",value:function(){for(var t=0,e=this.tweens.length;t<e;t++)this.tweens[t].stop();this.cmds.length=0}},{key:"animate",value:function(t){return this.cmds=this.cmds.concat(c.animationMap[t]||[]),this}},{key:"exec",value:function(t,e){var n=t.length,i=this;switch(this.currentTask=t[0],this.currentTask){case"to":i.stepCompleteCount=0;for(var r=1;r<n;r++){var o=t[r],a=o[1][2],s={};s[o[0]]=o[1][0];var u=new h.default.Tween(this.element).to(s,o[1][1]).onStart(function(){t.begin&&t.begin.call(i.element,i.element)}).onUpdate(function(){t.progress&&t.progress.call(i.element,i.element)}).easing(a||h.default.Easing.Linear.None).onComplete(function(){i.stepCompleteCount++,i.stepCompleteCount===n-1&&(t.end&&t.end.call(i.element,i.element),e&&i.complete&&i.complete(),i.index++,i.start())}).start();this.tweens.push(u)}break;case"wait":this.currentTaskBegin=new Date,this.timeout=t[1][0],setTimeout(function(){i._pause||(i.index++,i.start(),t.end&&t.end.call(i.element,i.element),e&&i.complete&&i.complete())},t[1][0]);break;case"then":var c=t[1][0];c.index=0,c.complete=function(){i.index++,i.start(),e&&i.complete&&i.complete()},c.start();break;case"cycle":var l=t[1][1];void 0===l?(i.index=t[1][0]||0,i.start()):l&&i.cycleCount===l?(i.index++,i.start(),e&&i.complete&&i.complete()):(i.cycleCount++,i.index=t[1][0],i.start())}}}]),c);function c(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this.element=t,this.cmds=[],this.index=0,this.tweens=[],this._pause=!1,this.loop=(0,s.setRafInterval)(function(){h.default.update()},15),this.cycleCount=0}u.get=function(t){return new u(t)},u.animationMap={},u.extend=function(t,e){u.animationMap[t]=e},e.default=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.setRafInterval=m,e.clearRafInterval=_,Date.now||(Date.now=function(){return(new Date).getTime()});var i=[],r=-1,o=!1,a=null,s=Date.now,u=0,c=["ms","moz","webkit","o"],l=0,h="undefined"!=typeof wx&&!wx.createCanvas,f="undefined"!=typeof wx&&wx.createCanvas,p="undefined"!=typeof window,d=p?window.requestAnimationFrame:null,v=p?window.cancelAnimationFrame:null;function y(t,e){var n=s(),i=Math.max(0,16-(n-u)),r=setTimeout(function(){t(n+i)},i);return u=n+i,r}function g(t){clearTimeout(t)}if(p){for(window.setRafInterval=m,window.clearRafInterval=_;l<c.length&&!window.requestAnimationFrame;++l)window.requestAnimationFrame=window[c[l]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[l]+"CancelAnimationFrame"]||window[c[l]+"CancelRequestAnimationFrame"];d||(d=y,v=g,window.requestAnimationFrame=d,window.cancelAnimationFrame=v)}else h?(d=y,v=g):f&&(d=requestAnimationFrame,v=cancelAnimationFrame);function m(t,e){if(r++,i.push({id:r,fn:t,interval:e,lastTime:s()}),!o){o=!0,function t(){a=d(t),function(t,e){if(Array.prototype.forEach)t.forEach(e);else for(var n=0,i=t.length;n<i;n++)e(t[n],n)}(i,function(t){(t.interval<17||s()-t.lastTime>=t.interval)&&(t.fn(),t.lastTime=s())})}()}return r}function _(t){for(var e=0,n=i.length;e<n;e++)if(t===i[e].id){i.splice(e,1);break}0===i.length&&(v(a),o=!1)}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=s(n(24)),a=s(n(1));function s(t){return t&&t.__esModule?t:{default:t}}var u=(i(c,[{key:"update",value:function(t){this.renderer.clear(this.ctx,this.width,this.height),this.renderer.render(this.ctx,t),this.ctx.draw&&this.ctx.draw()}},{key:"getHitRenderList",value:function(t){var e=this.renderList;return e.length=0,this.computeMatrix(t),e}},{key:"computeMatrix",value:function(t){for(var e=0,n=t.children.length;e<n;e++)this._computeMatrix(t.children[e])}},{key:"initComplex",value:function(t){t.complexCompositeOperation=this._getCompositeOperation(t),t.complexAlpha=this._getAlpha(t,1)}},{key:"_computeMatrix",value:function(t,e){if(t.isVisible())if(e&&!t.fixed?t._matrix.initialize(e.a,e.b,e.c,e.d,e.tx,e.ty):t._matrix.initialize(1,0,0,1,0,0),t._matrix.appendTransform(t.x,t.y,t.scaleX,t.scaleY,t.rotation,t.skewX,t.skewY,t.originX,t.originY),t instanceof a.default)for(var n=t.children,i=n.length,r=0;r<i;r++)this._computeMatrix(n[r],t._matrix);else t.initAABB(),this.renderList.push(t),this.initComplex(t)}},{key:"_getCompositeOperation",value:function(t){return t.compositeOperation?t.compositeOperation:t.parent?this._getCompositeOperation(t.parent):void 0}},{key:"_getAlpha",value:function(t,e){var n=t.alpha*e;return t.parent?this._getAlpha(t.parent,n):n}},{key:"isInStage",value:function(t){return this.collisionBetweenAABB(t.AABB,this.stage.AABB)}},{key:"collisionBetweenAABB",value:function(t,e){return!(t[0]+t[2]<e[0]||t[0]>e[0]+e[2]||t[1]+t[3]<e[1]||t[1]>e[1]+e[3])}}]),c);function c(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this.renderList=[],3===arguments.length?(this.renderer=new o.default(t,e,n),this.width=e,this.height=n):(this.renderer=new o.default(t),this.width=t.width,this.height=t.height),this.ctx=this.renderer.ctx}e.default=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=s(n(1)),c=s(n(13)),l=s(n(38)),a=s(n(7));function s(t){return t&&t.__esModule?t:{default:t}}var u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,o.default),i(h,[{key:"touchStartHandler",value:function(e){var n=this,t=e.changedTouches[0];e.stageX=t.x,e.stageY=t.y,this._getObjectUnderPoint(e,function(t){n.willDragObject=t,n._mouseDownX=e.stageX,n._mouseDownY=e.stageY,n.preStageX=e.stageX,n.preStageY=e.stageY})}},{key:"touchMoveHandler",value:function(n){var i=this,t=n.changedTouches[0];n.stageX=t.x,n.stageY=t.y,this._getObjectUnderPoint(n,function(t){var e=new a.default;e.stageX=n.stageX,e.stageY=n.stageY,e.pureEvent=n,i.willDragObject&&(e.type="drag",e.dx=e.stageX-i.preStageX,e.dy=e.stageY-i.preStageY,i.preStageX=e.stageX,i.preStageY=e.stageY,i.willDragObject.dispatchEvent(e)),t?null===i._overObject?i._overObject=t:t.id!==i._overObject.id?i._overObject=t:(e.type="touchmove",t.dispatchEvent(e)):i._overObject&&(i._overObject=null)})}},{key:"touchEndHandler",value:function(e){var n=this,t=e.changedTouches[0];e.stageX=t.x,e.stageY=t.y;var i=new a.default;i.stageX=e.stageX,i.stageY=e.stageY,i.pureEvent=e,this._getObjectUnderPoint(e,function(t){n._mouseUpX=e.stageX,n._mouseUpY=e.stageY,n.willDragObject=null,n.preStageX=null,n.preStageY=null,t&&Math.abs(n._mouseDownX-n._mouseUpX)<30&&Math.abs(n._mouseDownY-n._mouseUpY)<30&&(i.type="tap",t.dispatchEvent(i))})}},{key:"_handleMouseOut",value:function(t){this.dispatchEvent({pureEvent:t,type:"mouseout",stageX:t.stageX,stageY:t.stageY})}},{key:"_getObjectUnderPoint",value:function(t,e){var n=this.renderer.getHitRenderList(this);if(this.hitAABB)return this._hitRender.hitAABB(n,t,e);this._hitRender.clear(),this._hitRender.hit(n,t,e,n.length-1)}},{key:"on",value:function(t,e){switch(t){case"touchstart":this.touchStart=e;break;case"touchmove":this.touchMove=e;break;case"touchend":this.touchEnd=e}}},{key:"update",value:function(){this.renderer.update(this)}}]),h);function h(t,e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}(this,(h.__proto__||Object.getPrototypeOf(h)).call(this)),o=i.selectComponent("#"+n);o.setData({width:t,height:e}),o.stage=r;var a=o.getCaxCanvasId(),s=wx.createCanvasContext(a,o),u=wx.createCanvasContext(a+"Hit",o);return r.renderer=new c.default(s,t,e),r._hitRender=new l.default(u,o,a),r._overObject=null,r.ctx=s,r.hitAABB=!0,r.width=t,r.height=e,r}e.default=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o,a=n(0);var s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,((o=a)&&o.__esModule?o:{default:o}).default),i(u,[{key:"draw",value:function(){var t=this.width,e=this.height,n=this.r,i=n,r=t,o=t,a=e,s=e;this.beginPath(),this.moveTo(i,0),this.arcTo(r,0,o,a,n),this.arcTo(o,a,0,s,n),this.arcTo(0,s,0,0,n),this.arcTo(0,0,i,0,n),this.option.fillStyle&&(this.closePath(),this.fillStyle(this.option.fillStyle),this.fill()),this.option.strokeStyle&&(this.lineWidth(this.option.lineWidth),this.strokeStyle(this.option.strokeStyle),this.stroke())}}]),u);function u(t,e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));return r.option=Object.assign({lineWidth:1},i),r.r=n||0,r.width=t,r.height=e,r}e.default=s},function(t,e,n){var i=O(n(10)),r=O(n(11));n(18);var o=O(n(19)),a=O(n(14)),s=O(n(4)),u=O(n(2)),c=O(n(5)),l=O(n(1)),h=O(n(6)),f=O(n(0)),p=O(n(15)),d=O(n(39)),v=O(n(40)),y=O(n(41)),g=O(n(44)),m=O(n(45)),_=O(n(46)),b=O(n(47)),w=O(n(48)),x=n(12);function O(t){return t&&t.__esModule?t:{default:t}}r.default.easing={linear:i.default.Easing.Linear.None};var k={easing:{linear:i.default.Easing.Linear.None},util:{randomInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))}},Stage:o.default,WeStage:a.default,Graphics:s.default,Bitmap:u.default,Text:c.default,Group:l.default,Sprite:h.default,Shape:f.default,ArrowPath:d.default,Ellipse:v.default,Path:y.default,Button:g.default,RoundedRect:p.default,Rect:m.default,Circle:_.default,Polygon:b.default,EquilateralPolygon:w.default,setInterval:x.setRafInterval,clearInterval:x.clearRafInterval,tick:function(t){return(0,x.setRafInterval)(t,16)},untick:function(t){(0,x.clearRafInterval)(t)},caxCanvasId:0,TWEEN:i.default,To:r.default};["Quadratic","Cubic","Quartic","Quintic","Sinusoidal","Exponential","Circular","Elastic","Back","Bounce"].forEach(function(t){var e=t.toLowerCase();k.easing[e+"In"]=i.default.Easing[t].In,k.easing[e+"Out"]=i.default.Easing[t].Out,k.easing[e+"InOut"]=i.default.Easing[t].InOut,r.default.easing[e+"In"]=i.default.Easing[t].In,r.default.easing[e+"Out"]=i.default.Easing[t].Out,r.default.easing[e+"InOut"]=i.default.Easing[t].InOut}),k.loadImg=function(t){var e=new Image;e.onload=function(){t.complete(this)},e.src=t.img},k.loadImgs=function(o){var a=[],s=0,u=o.imgs.length;o.imgs.forEach(function(t,e){var n,i,r=new Image;r.onload=(n=e,i=r,function(){a[n]=i,s++,o.progress&&o.progress(s/u,s,n,i,a),s===u&&o.complete&&o.complete(a)}),r.src=t})},t.exports=k},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!l){var t=s(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){var i,r=n(11),o=(i=r)&&i.__esModule?i:{default:i};o.default.extend("rubber",[["to",["scaleX",{0:1.25,1:300}],["scaleY",{0:.75,1:300}]],["to",["scaleX",{0:.75,1:100}],["scaleY",{0:1.25,1:100}]],["to",["scaleX",{0:1.15,1:100}],["scaleY",{0:.85,1:100}]],["to",["scaleX",{0:.95,1:150}],["scaleY",{0:1.05,1:150}]],["to",["scaleX",{0:1.05,1:100}],["scaleY",{0:.95,1:100}]],["to",["scaleX",{0:1,1:250}],["scaleY",{0:1,1:250}]]]),o.default.extend("bounceIn",[["to",["scaleX",{0:0,1:0}],["scaleY",{0:0,1:0}]],["to",["scaleX",{0:1.35,1:200}],["scaleY",{0:1.35,1:200}]],["to",["scaleX",{0:.9,1:100}],["scaleY",{0:.9,1:100}]],["to",["scaleX",{0:1.1,1:100}],["scaleY",{0:1.1,1:100}]],["to",["scaleX",{0:.95,1:100}],["scaleY",{0:.95,1:100}]],["to",["scaleX",{0:1,1:100}],["scaleY",{0:1,1:100}]]]),o.default.extend("flipInX",[["to",["rotateX",{0:-90,1:0}]],["to",["rotateX",{0:20,1:300}]],["to",["rotateX",{0:-20,1:300}]],["to",["rotateX",{0:10,1:300}]],["to",["rotateX",{0:-5,1:300}]],["to",["rotateX",{0:0,1:300}]]]),o.default.extend("zoomOut",[["to",["scaleX",{0:0,1:400}],["scaleY",{0:0,1:400}]]])},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=h(n(20)),o=h(n(1)),s=h(n(13)),u=h(n(37)),c=h(n(7)),l=h(n(14));function h(t){return t&&t.__esModule?t:{default:t}}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}var p=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,o.default),i(d,[{key:"_handleContextmenu",value:function(t){this._getObjectUnderPoint(t)}},{key:"_handleDblClick",value:function(t){this._getObjectUnderPoint(t)}},{key:"_handleClick",value:function(t){Math.abs(this._mouseDownX-this._mouseUpX)<20&&Math.abs(this._mouseDownY-this._mouseUpY)<20&&this._getObjectUnderPoint(t)}},{key:"_handleMouseDown",value:function(t){this.isWegame&&(t.type="touchstart"),this.offset=this._getOffset(this.canvas);var e=this._getObjectUnderPoint(t);this.willDragObject=e,this._mouseDownX=t.stageX,this._mouseDownY=t.stageY,this.preStageX=t.stageX,this.preStageY=t.stageY}},{key:"scaleEventPoint",value:function(t,e){this._scaleX=t,this._scaleY=e}},{key:"_handleMouseUp",value:function(t){this.isWegame&&(t.type="touchend");var e=this._getObjectUnderPoint(t);this._mouseUpX=t.stageX,this._mouseUpY=t.stageY;var n=new c.default;n.stageX=t.stageX,n.stageY=t.stageY,n.pureEvent=t,this.willDragObject=null,this.preStageX=null,this.preStageY=null,e&&"touchend"===t.type&&Math.abs(this._mouseDownX-this._mouseUpX)<30&&Math.abs(this._mouseDownY-this._mouseUpY)<30&&(n.type="tap",e.dispatchEvent(n))}},{key:"_handleMouseOut",value:function(t){this._computeStageXY(t),this.dispatchEvent({pureEvent:t,type:"mouseout",stageX:t.stageX,stageY:t.stageY})}},{key:"_handleMouseMove",value:function(t){if(!(Date.now()-this._moveDetectionTime<this.moveDetectionInterval||(this._moveDetectionTime=Date.now(),this.isWegame&&(t.type="touchmove"),this.disableMoveDetection))){var e=this._getObjectUnderPoint(t),n=new c.default;n.stageX=t.stageX,n.stageY=t.stageY,n.pureEvent=t,this.willDragObject&&(n.type="drag",n.dx=n.stageX-this.preStageX,n.dy=n.stageY-this.preStageY,this.preStageX=n.stageX,this.preStageY=n.stageY,this.willDragObject.dispatchEvent(n)),e?null===this._overObject?(n.type="mouseover",e.dispatchEvent(n),this._overObject=e,this._setCursor(e)):e.id!==this._overObject.id?(this._overObject.dispatchEvent({pureEvent:t,type:"mouseout",stageX:t.stageX,stageY:t.stageY}),n.type="mouseover",e.dispatchEvent(n),this._setCursor(e),this._overObject=e):(n.type="mousemove",e.dispatchEvent(n),n.type="touchmove",e.dispatchEvent(n)):this._overObject&&(n.type="mouseout",this._overObject.dispatchEvent(n),this._overObject=null,this._setCursor({cursor:"default"}))}}},{key:"_setCursor",value:function(t){this.canvas.style&&(t.cursor?this.canvas.style.cursor=t.cursor:t.parent?this._setCursor(t.parent):this._setCursor({cursor:"default"}))}},{key:"_getObjectUnderPoint",value:function(t){return this._computeStageXY(t),this.hitAABB?this._hitRender.hitAABB(this,t):this._hitRender.hitPixel(this,t)}},{key:"_computeStageXY",value:function(t){if(this._boundingClientRect=this.isWegame?{left:0,top:0}:this.canvas.getBoundingClientRect(),t.touches||t.changedTouches){var e=t.touches[0]||t.changedTouches[0];e&&(t.stageX=(e.pageX-this.offset[0])/this._scaleX,t.stageY=(e.pageY-this.offset[1])/this._scaleY)}else t.stageX=(t.clientX-this._boundingClientRect.left-this.borderLeftWidth)/this._scaleX,t.stageY=(t.clientY-this._boundingClientRect.top-this.borderTopWidth)/this._scaleY}},{key:"_getOffset",value:function(t){if(this.isWegame)return[0,0];var e=0,n=0;if(!document.documentElement.getBoundingClientRect||!t.getBoundingClientRect){for(;t.offsetParent;)e+=t.offsetTop,n+=t.offsetLeft,t=t.offsetParent;return[n,e]}var i=t.getBoundingClientRect();return n=i.left,e=i.top,[n+Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),e+Math.max(document.documentElement.scrollTop,document.body.scrollTop)]}},{key:"update",value:function(){this.renderer.update(this)}},{key:"on",value:function(t,e){var n=this;this.canvas.addEventListener(t,function(t){n._computeStageXY(t),e(t)})}},{key:"off",value:function(t,e){this.canvas.removeEventListener(t,e)}}]),d);function d(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);var i=f(this,(d.__proto__||Object.getPrototypeOf(d)).call(this)),r=arguments.length;if(i.isWegame="undefined"!=typeof wx&&wx.createCanvas,(i.moveDetectionInterval=0)===r)i.canvas=a.default,i.disableMoveDetection=!0,i.moveDetectionInterval=500;else{var o;if(4===r)return o=new l.default(t,e,n,arguments[3]),f(i,o);1===r?i.canvas="string"==typeof t?document.querySelector(t):t:(i.renderTo="string"==typeof n?document.querySelector(n):n,"CANVAS"===i.renderTo.tagName?(i.canvas=i.renderTo,i.canvas.width=t,i.canvas.height=e):(i.canvas=document.createElement("canvas"),i.canvas.width=t,i.canvas.height=e,i.renderTo.appendChild(i.canvas))),i._boundingClientRect=i.canvas.getBoundingClientRect(),i.offset=i._getOffset(i.canvas)}return i.renderer=new s.default(i.canvas),i.isWegame?(wx.onTouchStart(function(t){return i._handleMouseDown(t)}),wx.onTouchMove(function(t){return i._handleMouseMove(t)}),wx.onTouchEnd(function(t){return i._handleMouseUp(t)})):(i.canvas.addEventListener("click",function(t){return i._handleClick(t)}),i.canvas.addEventListener("mousedown",function(t){return i._handleMouseDown(t)}),i.canvas.addEventListener("mousemove",function(t){return i._handleMouseMove(t)}),i.canvas.addEventListener("mouseup",function(t){return i._handleMouseUp(t)}),i.canvas.addEventListener("mouseout",function(t){return i._handleMouseOut(t)}),i.canvas.addEventListener("touchstart",function(t){return i._handleMouseDown(t)}),i.canvas.addEventListener("touchmove",function(t){return i._handleMouseMove(t)}),i.canvas.addEventListener("touchend",function(t){return i._handleMouseUp(t)}),i.canvas.addEventListener("dblclick",function(t){return i._handleDblClick(t)}),document.addEventListener("contextmenu",function(t){return i._handleContextmenu(t)})),i.borderTopWidth=0,i.borderLeftWidth=0,i.hitAABB=!1,i._hitRender=new u.default,i._overObject=null,i._scaleX=1,i._scaleY=1,i._mouseDownX=0,i._mouseDownY=0,i._mouseUpX=0,i._mouseUpY=0,i.willDragObject=null,i.preStageX=null,i.preStageY=null,i.width=i.canvas.width,i.height=i.canvas.height,i.___instanceof="Stage",i._moveDetectionTime=Date.now(),i}e.default=p},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=null;"undefined"!=typeof wx&&wx.createCanvas&&(i=wx.createCanvas()),e.default=i},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=.017453292519943295,l=2*Math.PI,o=(i(a,[{key:"identity",value:function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this}},{key:"appendTransform",value:function(t,e,n,i,r,o,a,s,u){if(r%360)var c=r*f,l=Math.cos(c),h=Math.sin(c);else l=1,h=0;return o||a?(o*=f,a*=f,this.append(Math.cos(a),Math.sin(a),-Math.sin(o),Math.cos(o),t,e),this.append(l*n,h*n,-h*i,l*i,0,0)):this.append(l*n,h*n,-h*i,l*i,t,e),(s||u)&&(this.tx-=s*this.a+u*this.c,this.ty-=s*this.b+u*this.d),this}},{key:"append",value:function(t,e,n,i,r,o){var a=this.a,s=this.b,u=this.c,c=this.d;return this.a=t*a+e*u,this.b=t*s+e*c,this.c=n*a+i*u,this.d=n*s+i*c,this.tx=r*a+o*u+this.tx,this.ty=r*s+o*c+this.ty,this}},{key:"initialize",value:function(t,e,n,i,r,o){return this.a=t,this.b=e,this.c=n,this.d=i,this.tx=r,this.ty=o,this}},{key:"setValues",value:function(t,e,n,i,r,o){return this.a=null==t?1:t,this.b=e||0,this.c=n||0,this.d=null==i?1:i,this.tx=r||0,this.ty=o||0,this}},{key:"invert",value:function(){var t=this.a,e=this.b,n=this.c,i=this.d,r=this.tx,o=t*i-e*n;return this.a=i/o,this.b=-e/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-i*r)/o,this.ty=-(t*this.ty-e*r)/o,this}},{key:"copy",value:function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)}}]),a);function a(t,e,n,i,r,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.a=null==t?1:t,this.b=e||0,this.c=n||0,this.d=null==i?1:i,this.tx=r||0,this.ty=o||0,this}o.decompose=function(t,e,n,i,r,o,a){var s=-Math.atan2(-n,i),u=Math.atan2(e,t),c=Math.abs(s+u);c<1e-5||Math.abs(l-c)<1e-5?(a.rotation=u,t<0&&0<=i&&(a.rotation+=a.rotation<=0?Math.PI:-Math.PI),a.skewX=a.skewY=0):(a.rotation=0,a.skewX=s,a.skewY=u),a.scaleX=Math.sqrt(t*t+e*e),a.scaleY=Math.sqrt(n*n+i*i),a.x=r,a.y=o},e.default=o},function(t,e,n){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,"__esModule",{value:!0});var r=(function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}(o,[{key:"addEventListener",value:function(t,e,n){var i,r=(i=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[t];return r&&this.removeEventListener(t,e,n),(r=i[t])?r.push(e):i[t]=[e],e}},{key:"removeEventListener",value:function(t,n,e){var i=e?this._captureListeners:this._listeners;if(i){var r=i[t];r&&r.every(function(t,e){return t!==n||(r.splice(e,1),!1)})}}},{key:"on",value:function(t,e,n){this.addEventListener(t,e,n)}},{key:"off",value:function(t,e,n){this.removeEventListener(t,e,n)}},{key:"dispatchEvent",value:function(t){for(var e=this,n=[e];e.parent;)n.push(e=e.parent);var i,r=n.length;for(i=r-1;0<=i&&!t.propagationStopped;i--)n[i]._dispatchEvent(t,0);for(i=0;i<r&&!t.propagationStopped;i++)n[i]._dispatchEvent(t,1)}},{key:"_dispatchEvent",value:function(e,t){var n=this;if((e.target=this)._captureListeners&&0===t){var i=this._captureListeners[e.type];i&&i.forEach(function(t){t.call(n,e)})}if(this._listeners&&1===t){var r=this._listeners[e.type];r&&r.forEach(function(t){t.call(n,e)})}}}]),o);function o(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this._listeners=null,this._captureListeners=null}e.default=r},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i={_nextID:0,get:function(){return i._nextID++}};e.default=i},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=a(n(1)),p=a(n(4)),o=a(n(8)),d=a(n(6)),v=a(n(2)),y=a(n(5)),g=n(26);function a(t){return t&&t.__esModule?t:{default:t}}var s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,o.default),i(u,[{key:"clear",value:function(t,e,n){t.clearRect(0,0,e,n)}},{key:"render",value:function(t,e,n){var i=e._matrix;if(e.children)for(var r=e.children.slice(0),o=r.length,a=0;a<o;a++){var s=r[a];i.initialize(1,0,0,1,0,0),i.appendTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.originX,e.originY),t.save(),this._render(t,s,n?null:i,n,!0),t.restore()}else this._render(t,e,n?null:i,n)}},{key:"_render",value:function(t,e,n,i,r){if(e.isVisible()){n&&!e.fixed?e._matrix.initialize(n.a,n.b,n.c,n.d,n.tx,n.ty):i&&!e.fixed?e._matrix.initialize(i.scale,0,0,i.scale,-1*i.x,-1*i.y):e._matrix.initialize(1,0,0,1,0,0),n=e._matrix,!r&&i||n.appendTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.originX,e.originY);var o=e.clipGraphics;o&&(t.beginPath(),o._matrix.copy(n),o._matrix.appendTransform(o.x,o.y,o.scaleX,o.scaleY,o.rotation,o.skewX,o.skewY,o.originX,o.originY),t.setTransform(o._matrix.a,o._matrix.b,o._matrix.c,o._matrix.d,o._matrix.tx,o._matrix.ty),o.render(t),t.clip(e.clipRuleNonzero?"nonzero":"evenodd"));var a=e.absClipGraphics;if(a&&(t.beginPath(),a._matrix.initialize(1,0,0,1,0,0),a._matrix.appendTransform(a.x,a.y,a.scaleX,a.scaleY,a.rotation,a.skewX,a.skewY,a.originX,a.originY),t.setTransform(a._matrix.a,a._matrix.b,a._matrix.c,a._matrix.d,a._matrix.tx,a._matrix.ty),a.render(t),t.clip(e.absClipRuleNonzero?"nonzero":"evenodd")),t.setTransform(n.a,n.b,n.c,n.d,n.tx,n.ty),e._readyToCache||e.cacheUpdating)this.setComplexProps(t,e),e._readyToCache=!1,e.cacheCtx.clearRect(0,0,e.cacheCanvas.width,e.cacheCanvas.height),e.cacheCtx.save(),this.render(e.cacheCtx,e,e._cacheData),e.cacheCtx.restore(),e._readyToFilter&&(e.cacheCtx.putImageData((0,g.filter)(e.cacheCtx.getImageData(0,0,e.cacheCanvas.width,e.cacheCanvas.height),e._filterName),0,0),this._readyToFilter=!1),t.drawImage(e.cacheCanvas,e._cacheData.x,e._cacheData.y);else if(e.cacheCanvas&&!i)this.setComplexProps(t,e),t.drawImage(e.cacheCanvas,e._cacheData.x,e._cacheData.y);else if(e instanceof f.default)for(var s=e.children.slice(0),u=s.length,c=0;c<u;c++)t.save(),this._render(t,s[c],n),t.restore();else if(e instanceof p.default)this.setComplexProps(t,e),e.render(t);else if(e instanceof d.default&&e.rect){this.setComplexProps(t,e),e.updateFrame();var l=e.rect;t.drawImage(e.img,l[0],l[1],l[2],l[3],0,0,l[2],l[3])}else if(e instanceof v.default&&e.rect){this.setComplexProps(t,e);var h=e.rect;t.drawImage(e.img,h[0],h[1],h[2],h[3],0,0,h[2],h[3])}else e instanceof y.default&&(this.setComplexProps(t,e),t.font=e.font,t.fillStyle=e.color,t.textAlign=e.textAlign,t.textBaseline=e.baseline,t.fillText(e.text,0,0))}}},{key:"setComplexProps",value:function(t,e){e.complexCompositeOperation=t.globalCompositeOperation=this.getCompositeOperation(e),e.complexAlpha=t.globalAlpha=this.getAlpha(e,1),e.complexShadow=this.getShadow(e),e.complexShadow&&(t.shadowColor=e.complexShadow.color,t.shadowOffsetX=e.complexShadow.offsetX,t.shadowOffsetY=e.complexShadow.offsetY,t.shadowBlur=e.complexShadow.blur)}},{key:"getCompositeOperation",value:function(t){return t.compositeOperation?t.compositeOperation:t.parent?this.getCompositeOperation(t.parent):void 0}},{key:"getAlpha",value:function(t,e){var n=t.alpha*e;return t.parent?this.getAlpha(t.parent,n):n}},{key:"getShadow",value:function(t){return t.shadow?t.shadow:t.parent?this.getShadow(t.parent):void 0}}]),u);function u(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));return 3===arguments.length?(i.ctx=t,i.width=e,i.height=n):(i.ctx=t.getContext("2d"),i.width=t.width,i.height=t.height),i}e.default=s},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":_typeof2(window))&&(n=window)}t.exports=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.filter=function(t,e){if("string"==typeof e){var n=e.split("(")[0],i=function(t){return-1!==(t=t.replace(/(invert)|(brightness)|(blur)|(contrast)|(grayscale)|(sepia)|(threshold)|(gamma)?\(/g,"").replace(")","")).indexOf("%")?Number(t.replace("%",""))/100:-1!==t.indexOf("px")?Number(t.replace("px","")):Number(t)}(e);switch(n){case"invert":return(0,r.invert)(t,i);case"brightness":return(0,a.brightness)(t,255*i-255);case"blur":return(0,o.blur)(t,i);case"contrast":return(0,s.contrast)(t,255*i-255);case"grayscale":return(0,u.grayscale)(t,i);case"sepia":return(0,c.sepia)(t,i);case"threshold":return(0,l.threshold)(t,i);case"gamma":return(0,h.gamma)(t,i)}}else switch(e.type){case"colorize":return(0,f.colorize)(t,e)}};var r=n(27),o=n(28),a=n(30),s=n(31),u=n(32),c=n(33),l=n(34),h=n(35),f=n(36)},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.invert=function(t,e){var n=t.data;e=void 0===e?1:e;for(var i=0;i<n.length;i+=4)n[i]=n[i]+e*(255-2*n[i]),n[i+1]=n[i+1]+e*(255-2*n[i+1]),n[i+2]=n[i+2]+e*(255-2*n[i+2]);return t}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.blur=function(t,e){if((e=Math.abs(e))<=1)return t;for(var n=e/2,i=Math.ceil(e)+(1-Math.ceil(e)%2),r=new Float32Array(i),o=(.5+n)/3,a=o*o,s=1/Math.sqrt(2*Math.PI*a),u=-1/(2*o*o),c=0,l=Math.floor(i/2),h=0;h<i;h++){var f=h-l,p=s*Math.exp(f*f*u);r[h]=p,c+=p}for(h=0;h<r.length;h++)r[h]/=c;return function(t,e,n,i){return function(t,e,n){for(var i=e.length,r=Math.floor(i/2),o=t.data,a=t.width,s=t.height,u=a,c=s,l=(0,j.createImageData)(u,c),h=l.data,f=n?1:0,p=0;p<c;p++)for(var d=0;d<u;d++){for(var v=p,y=d,g=4*(p*u+d),m=0,_=0,b=0,w=0,x=0;x<i;x++){var O=v,k=Math.min(a-1,Math.max(0,y+x-r)),C=4*(O*a+k),M=e[x];m+=o[C]*M,_+=o[1+C]*M,b+=o[2+C]*M,w+=o[3+C]*M}h[g]=m,h[1+g]=_,h[2+g]=b,h[3+g]=w+f*(255-w)}return l}(function(t,e,n){for(var i=e.length,r=Math.floor(i/2),o=t.data,a=t.width,s=t.height,u=a,c=s,l=(0,j.createImageData)(u,c),h=l.data,f=n?1:0,p=0;p<c;p++)for(var d=0;d<u;d++){for(var v=p,y=d,g=4*(p*u+d),m=0,_=0,b=0,w=0,x=0;x<i;x++){var O=4*(Math.min(s-1,Math.max(0,v+x-r))*a+y),k=e[x];m+=o[O]*k,_+=o[1+O]*k,b+=o[2+O]*k,w+=o[3+O]*k}h[g]=m,h[1+g]=_,h[2+g]=b,h[3+g]=w+f*(255-w)}return l}(t,n,i),e,i)}(t,r,r,!1)};var j=n(29)},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.createImageData=function(t,e){return i.createImageData(t,e)};var i=null;"undefined"!=typeof document?i=document.createElement("canvas").getContext("2d"):"undefined"!=typeof wx&&wx.createCanvas&&(i=wx.createCanvas().getContext("2d"))},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.brightness=function(t,e){for(var n=t.data,i=n.length,r=0;r<i;r+=4)n[r]+=e,n[r+1]+=e,n[r+2]+=e;return t}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.contrast=function(t,e){for(var n=t.data,i=n.length,r=259*(e+255)/(255*(259-e)),o=0;o<i;o+=4)n[o]=r*(n[o]-128)+128,n[o+1]=r*(n[o+1]-128)+128,n[o+2]=r*(n[o+2]-128)+128;return t}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.grayscale=function(t,e){for(var n=t.data,i=n.length,r=0;r<i;r+=4){var o=n[r],a=n[r+1],s=n[r+2],u=.2126*o+.7152*a+.0722*s;n[r]=o+(u-o)*e,n[r+1]=a+(u-a)*e,n[r+2]=s+(u-s)*e}return t}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.sepia=function(t,e){for(var n=t.data,i=n.length,r=0;r<i;r+=4){var o=n[r],a=n[r+1],s=n[r+2],u=.393*o+.769*a+.189*s,c=.349*o+.686*a+.168*s,l=.272*o+.534*a+.131*s;n[r]=o+(u-o)*e,n[r+1]=a+(c-a)*e,n[r+2]=s+(l-s)*e}return t}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.threshold=function(t,e){for(var n=t.data,i=n.length,r=0;r<i;r+=4){var o=n[r],a=n[r+1],s=n[r+2],u=e<=.2126*o+.7152*a+.0722*s?255:0;n[r]=n[r+1]=n[r+2]=u}return t}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.gamma=function(t,e){for(var n=t.data,i=n.length,r=0;r<i;r+=4)n[r]=255*Math.pow(n[r]/255,e),n[r+1]=255*Math.pow(n[r+1]/255,e),n[r+2]=255*Math.pow(n[r+2]/255,e);return t}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.colorize=function(t,e){for(var n=t.data,i=n.length,r="#"===e.color.charAt(0)?e.color.substr(1):e.color,o={r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16)},a=0;a<i;a+=4)n[a]-=(n[a]-o.r)*e.amount,n[a+1]-=(n[a+1]-o.g)*e.amount,n[a+2]-=(n[a+2]-o.b)*e.amount;return t}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var h=s(n(1)),f=s(n(4)),o=s(n(8)),a=s(n(7)),p=s(n(6)),d=s(n(2)),v=s(n(5));function s(t){return t&&t.__esModule?t:{default:t}}var u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,o.default),i(c,[{key:"clear",value:function(){this.ctx.clearRect(0,0,this.width,this.height)}},{key:"hitAABB",value:function(t,e){for(var n=t.children.slice(0),i=n.length-1;0<=i;i--){var r=n[i],o=this._hitAABB(r,e);if(o)return o}}},{key:"_hitAABB",value:function(t,e){if(!t.ignoreHit&&t.isVisible())if(t instanceof h.default)for(var n=t.children.slice(0),i=n.length-1;0<=i;i--){var r=n[i],o=this._hitAABB(r,e);if(o)return o}else if(t.AABB&&this.checkPointInAABB(e.stageX,e.stageY,t.AABB))return this._dispatchEvent(t,e),t}},{key:"checkPointInAABB",value:function(t,e,n){var i=n[0];if(t<i)return!1;var r=n[1];return!(e<r||i+n[2]<t||r+n[3]<e)}},{key:"hitPixel",value:function(t,e){var n=this.ctx;n.clearRect(0,0,2,2);for(var i=t._hitMatrix,r=t.children.slice(0),o=r.length-1;0<=o;o--){var a=r[o];i.initialize(1,0,0,1,0,0),i.appendTransform(t.x-e.stageX,t.y-e.stageY,t.scaleX,t.scaleY,t.rotation,t.skewX,t.skewY,t.originX,t.originY),n.save();var s=this._hitPixel(a,e,i);if(n.restore(),s)return s}}},{key:"_hitPixel",value:function(t,e,n){if(!t.ignoreHit&&t.isVisible()){var i=this.ctx;n&&!t.fixed?t._hitMatrix.initialize(n.a,n.b,n.c,n.d,n.tx,n.ty):t._hitMatrix.initialize(1,0,0,1,0,0),(n=t._hitMatrix).appendTransform(t.x,t.y,t.scaleX,t.scaleY,t.rotation,t.skewX,t.skewY,t.originX,t.originY);var r=t.clipGraphics;r&&(i.beginPath(),r._matrix.copy(n),r._matrix.appendTransform(r.x,r.y,r.scaleX,r.scaleY,r.rotation,r.skewX,r.skewY,r.originX,r.originY),i.setTransform(r._matrix.a,r._matrix.b,r._matrix.c,r._matrix.d,r._matrix.tx,r._matrix.ty),r.render(i),i.clip(t.clipRuleNonzero?"nonzero":"evenodd"));var o=t.absClipGraphics;if(o&&(i.beginPath(),o._matrix.initialize(1,0,0,1,0,0),o._matrix.appendTransform(o.x,o.y,o.scaleX,o.scaleY,o.rotation,o.skewX,o.skewY,o.originX,o.originY),i.setTransform(o._matrix.a,o._matrix.b,o._matrix.c,o._matrix.d,o._matrix.tx,o._matrix.ty),o.render(i),i.clip(t.absClipRuleNonzero?"nonzero":"evenodd")),t.cacheCanvas)i.setTransform(n.a,n.b,n.c,n.d,n.tx,n.ty),i.drawImage(t.cacheCanvas,t._cacheData.x,t._cacheData.y);else if(t instanceof h.default)for(var a=t.children.slice(0),s=a.length-1;0<=s;s--){i.save();var u=this._hitPixel(a[s],e,n);if(i.restore(),u)return u}else if(i.setTransform(n.a,n.b,n.c,n.d,n.tx,n.ty),t instanceof f.default)this.setComplexProps(i,t),t.render(i);else if(t instanceof p.default&&t.rect){this.setComplexProps(i,t),t.updateFrame();var c=t.rect;i.drawImage(t.img,c[0],c[1],c[2],c[3],0,0,c[2],c[3])}else if(t instanceof d.default&&t.rect){this.setComplexProps(i,t);var l=t.rect;i.drawImage(t.img,l[0],l[1],l[2],l[3],0,0,l[2],l[3])}else t instanceof v.default&&(this.setComplexProps(i,t),i.font=t.font,i.fillStyle=t.color,i.textAlign=t.textAlign,i.textBaseline=t.baseline,i.fillText(t.text,0,0));return 1<i.getImageData(0,0,1,1).data[3]?(this._dispatchEvent(t,e),t):void 0}}},{key:"setComplexProps",value:function(t,e){t.globalCompositeOperation=e.complexCompositeOperation,t.globalAlpha=e.complexAlpha}},{key:"_dispatchEvent",value:function(t,e){if(-1===this.disableEvents.indexOf(e.type)){var n=new a.default;n.stageX=e.stageX,n.stageY=e.stageY,n.pureEvent=e,n.type=e.type,t.dispatchEvent(n)}}}]),c);function c(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));return"undefined"!=typeof wx&&wx.createCanvas?t.canvas=wx.createCanvas():t.canvas=document.createElement("canvas"),t.canvas.width=1,t.canvas.height=1,t.ctx=t.canvas.getContext("2d"),t.disableEvents=["mouseover","mouseout","mousemove","touchmove"],t}e.default=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var l=s(n(4)),o=s(n(8)),a=s(n(7)),h=s(n(6)),f=s(n(2)),p=s(n(5));function s(t){return t&&t.__esModule?t:{default:t}}var u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,o.default),i(c,[{key:"clear",value:function(){this.ctx.clearRect(0,0,2,2)}},{key:"hitAABB",value:function(t,e,n){for(var i=t.length-1;0<=i;i--){var r=t[i];if(r.AABB&&this.checkPointInAABB(e.stageX,e.stageY,r.AABB))return this._dispatchEvent(r,e),n(r),r}}},{key:"checkPointInAABB",value:function(t,e,n){var i=n[0];if(t<i)return!1;var r=n[1];return!(e<r||i+n[2]<t||r+n[3]<e)}},{key:"hit",value:function(e,n,i,r){var o=this,t=this.ctx,a=e[r],s=a._hitMatrix.initialize(1,0,0,1,0,0);if(t.save(),s.appendTransform(a.x-n.stageX,a.y-n.stageY,a.scaleX,a.scaleY,a.rotation,a.skewX,a.skewY,a.originX,a.originY),t.globalCompositeOperation=a.complexCompositeOperation,t.globalAlpha=a.complexAlpha,t.setTransform(s.a,s.b,s.c,s.d,s.tx,s.ty),a instanceof l.default)a.render(t);else if(a instanceof h.default&&a.rect){a.updateFrame();var u=a.rect;t.drawImage(a.img,u[0],u[1],u[2],u[3],0,0,u[2],u[3])}else if(a instanceof f.default&&a.rect){var c=a.rect;t.drawImage(a.img,c[0],c[1],c[2],c[3],0,0,c[2],c[3])}else a instanceof p.default&&(t.font=a.font,t.fillStyle=a.color,t.textAlign=a.textAlign,t.fillText(a.text,0,0));t.restore(),r--,t.draw(!1,function(){wx.canvasGetImageData({canvasId:o._hitCanvasId,x:0,y:0,width:1,height:1,success:function(t){1<t.data[3]?(o._dispatchEvent(a,n),i(a)):-1<r&&o.hit(e,n,i,r)}},o._component)})}},{key:"_dispatchEvent",value:function(t,e){if(-1===this.disableEvents.indexOf(e.type)){var n=new a.default;n.stageX=e.stageX,n.stageY=e.stageY,n.pureEvent=e,n.type=e.type,t.dispatchEvent(n)}}}]),c);function c(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));return i.ctx=t,i._isWeapp=!0,i._component=e,i._hitCanvasId=n+"Hit",i.disableEvents=["mouseover","mouseout","mousemove","touchmove"],i}e.default=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o,a=n(0);var s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,((o=a)&&o.__esModule?o:{default:o}).default),i(u,[{key:"draw",value:function(){var t=this.path;this.beginPath();var e=t.length;if(2===e)this.drawArrow(t[0].x,t[0].y,t[1].x,t[1].y,30);else{this.moveTo(t[0].x,t[0].y);for(var n=1;n<e-1;n++)this.lineTo(t[n].x,t[n].y);this.drawArrow(t[e-2].x,t[e-2].y,t[e-1].x,t[e-1].y,30)}this.stroke()}},{key:"drawArrow",value:function(t,e,n,i,r){var o=180*Math.atan2(e-i,t-n)/Math.PI,a=(o+r)*Math.PI/180,s=(o-r)*Math.PI/180,u=this.option.headSize,c=u*Math.cos(a),l=u*Math.sin(a),h=u*Math.cos(s),f=u*Math.sin(s),p=t-c,d=e-l;this.moveTo(p,d),this.moveTo(t,e),this.lineTo(n,i),p=n+c,d=i+l,this.moveTo(p,d),this.lineTo(n,i),p=n+h,d=i+f,this.lineTo(p,d),this.strokeStyle(this.option.strokeStyle),this.lineWidth(this.option.lineWidth)}}]),u);function u(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));return n.path=t,n.option=Object.assign({strokeStyle:"black",lineWidth:1,headSize:10},e),n}e.default=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o,a=n(0);var s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,((o=a)&&o.__esModule?o:{default:o}).default),i(u,[{key:"draw",value:function(){var t=this.width,e=this.height,n=t/2*.5522848,i=e/2*.5522848,r=t,o=e,a=t/2,s=e/2;this.beginPath(),this.moveTo(0,s),this.bezierCurveTo(0,s-i,a-n,0,a,0),this.bezierCurveTo(a+n,0,r,s-i,r,s),this.bezierCurveTo(r,s+i,a+n,o,a,o),this.bezierCurveTo(a-n,o,0,s+i,0,s),this.option.strokeStyle&&(void 0!==this.option.lineWidth&&this.lineWidth(this.option.lineWidth),this.strokeStyle(this.option.strokeStyle),this.stroke()),this.option.fillStyle&&(this.fillStyle(this.option.fillStyle),this.fill())}}]),u);function u(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));return i.option=n||{},i.width=t,i.height=e,i}e.default=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var h=a(n(42)),o=a(n(0)),f=a(n(43));function a(t){return t&&t.__esModule?t:{default:t}}var s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,o.default),i(u,[{key:"draw",value:function(){var n=this,t=(0,h.default)(this.d);this.beginPath();for(var i=void 0,r=void 0,e=void 0,o=void 0,a=0,s=t.length;a<s;a++){var u=t[a],c=u[0],l=t[a-1];switch(c){case"M":i=u[1],r=u[2],this.moveTo(i,r);break;case"L":i=u[1],r=u[2],this.lineTo(i,r);break;case"H":i=u[1],this.lineTo(i,r);break;case"V":r=u[1],this.lineTo(i,r);break;case"C":i=u[5],r=u[6],this.bezierCurveTo(u[1],u[2],u[3],u[4],i,r);break;case"S":"C"===l[0]||"c"===l[0]?this.bezierCurveTo(i+l[5]-l[3],r+l[6]-l[4],u[1],u[2],u[3],u[4]):"S"!==l[0]&&"s"!==l[0]||this.bezierCurveTo(i+l[3]-l[1],r+l[4]-l[2],u[1],u[2],u[3],u[4]),i=u[3],r=u[4];break;case"Q":i=u[3],r=u[4],this.quadraticCurveTo(u[1],u[2],i,r);break;case"m":i+=u[1],r+=u[2],this.moveTo(i,r);break;case"l":i+=u[1],r+=u[2],this.lineTo(i,r);break;case"h":i+=u[1],this.lineTo(i,r);break;case"v":r+=u[1],this.lineTo(i,r);break;case"c":this.bezierCurveTo(i+u[1],r+u[2],i+u[3],r+u[4],i+u[5],r+u[6]),i+=u[5],r+=u[6];break;case"s":"C"===l[0]||"c"===l[0]?this.bezierCurveTo(i+l[5]-l[3],r+l[6]-l[4],i+u[1],r+u[2],i+u[3],r+u[4]):"S"!==l[0]&&"s"!==l[0]||this.bezierCurveTo(i+l[3]-l[1],r+l[4]-l[2],i+u[1],r+u[2],i+u[3],r+u[4]),i+=u[3],r+=u[4];break;case"q":this.quadraticCurveTo(i+u[1],r+u[2],u[3]+i,u[4]+r),i+=u[3],r+=u[4];break;case"Z":case"z":this.closePath();break;case"a":o=(e=(0,f.default)({rx:u[1],ry:u[2],px:i,py:r,xAxisRotation:u[3],largeArcFlag:u[4],sweepFlag:u[5],cx:i+u[6],cy:i+u[7]}))[e.length-1],e.forEach(function(t,e){0===e&&n.moveTo(i,r),n.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y)}),i=o.x,r=o.y;break;case"A":o=(e=(0,f.default)({rx:u[1],ry:u[2],px:i,py:r,xAxisRotation:u[3],largeArcFlag:u[4],sweepFlag:u[5],cx:u[6],cy:u[7]}))[e.length-1],e.forEach(function(t,e){0===e&&n.moveTo(i,r),n.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y)}),i=o.x,r=o.y;break;case"T":"Q"===l[0]||"q"===l[0]?(preCX=i+l[3]-l[1],preCY=r+l[4]-l[2],this.quadraticCurveTo(i,r,preCX,preCY,u[1],u[2])):"T"!==l[0]&&"t"!==l[0]||(this.quadraticCurveTo(i,r,i+i-preCX,r+r-preCY,u[1],u[2]),preCX=i+i-preCX,preCY=r+r-preCY),i=u[1],r=u[2];break;case"t":"Q"===l[0]||"q"===l[0]?(preCX=i+l[3]-l[1],preCY=r+l[4]-l[2],this.quadraticCurveTo(i,r,preCX,preCY,i+u[1],r+u[2])):"T"!==l[0]&&"t"!==l[0]||(this.quadraticCurveTo(i,r,i+i-preCX,r+r-preCY,i+u[1],r+u[2]),preCX=i+i-preCX,preCY=r+r-preCY),i+=u[1],r+=u[2]}}this.option.fillStyle&&(this.fillStyle(this.option.fillStyle),this.fill()),this.option.strokeStyle&&(this.lineWidth(this.option.lineWidth),this.strokeStyle(this.option.strokeStyle),this.stroke())}}]),u);function u(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));return n.d=t,e=Object.assign({lineWidth:1},e),n.option=e,n}e.default=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var a=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;e.default=function(t){var r=[];return t.replace(i,function(t,e,n){var i=e.toLowerCase();for(n=function(t){var e=t.match(a);return e?e.map(Number):[]}(n),"m"===i&&2<n.length&&(r.push([e].concat(n.splice(0,2))),i="l",e="m"===e?"l":"L");;){if(n.length===o[i])return n.unshift(e),r.push(n);if(n.length<o[i])throw new Error("malformed path data");r.push([e].concat(n.splice(0,o[i])))}}),r}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});function Y(t,e,n,i,r,o,a){var s=t.x,u=t.y;return{x:i*(s*=e)-r*(u*=n)+o,y:r*s+i*u+a}}function A(t,e,n,i){var r=t*i-e*n<0?-1:1,o=(t*n+e*i)/(Math.sqrt(t*t+e*e)*Math.sqrt(t*t+e*e));return 1<o&&(o=1),o<-1&&(o=-1),r*Math.acos(o)}var R=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},D=2*Math.PI;e.default=function(t){var e=t.px,n=t.py,i=t.cx,r=t.cy,u=t.rx,c=t.ry,o=t.xAxisRotation,a=void 0===o?0:o,s=t.largeArcFlag,l=void 0===s?0:s,h=t.sweepFlag,f=void 0===h?0:h,p=[];if(0===u||0===c)return[];var d=Math.sin(a*D/360),v=Math.cos(a*D/360),y=v*(e-i)/2+d*(n-r)/2,g=-d*(e-i)/2+v*(n-r)/2;if(0==y&&0==g)return[];u=Math.abs(u),c=Math.abs(c);var m=Math.pow(y,2)/Math.pow(u,2)+Math.pow(g,2)/Math.pow(c,2);1<m&&(u*=Math.sqrt(m),c*=Math.sqrt(m));var _,b,w,x,O,k,C,M=function(t,e,n,i,r,o,a,s,u,c,l,h){var f=Math.pow(r,2),p=Math.pow(o,2),d=Math.pow(l,2),v=Math.pow(h,2),y=f*p-f*v-p*d;y<0&&(y=0),y/=f*v+p*d;var g=(y=Math.sqrt(y)*(a===s?-1:1))*r/o*h,m=y*-o/r*l,_=c*g-u*m+(t+n)/2,b=u*g+c*m+(e+i)/2,w=(l-g)/r,x=(h-m)/o,O=(-l-g)/r,k=(-h-m)/o,C=A(1,0,w,x),M=A(w,x,O,k);return 0===s&&0<M&&(M-=D),1===s&&M<0&&(M+=D),[_,b,C,M]}(e,n,i,r,u,c,l,f,d,v,y,g),j=R(M,4),P=j[0],T=j[1],E=j[2],S=j[3],X=Math.max(Math.ceil(Math.abs(S)/(D/4)),1);S/=X;for(var I=0;I<X;I++)p.push((_=E,b=S,void 0,w=4/3*Math.tan(b/4),x=Math.cos(_),O=Math.sin(_),k=Math.cos(_+b),C=Math.sin(_+b),[{x:x-O*w,y:O+x*w},{x:k+C*w,y:C-k*w},{x:k,y:C}])),E+=S;return p.map(function(t){var e=Y(t[0],u,c,v,d,P,T),n=e.x,i=e.y,r=Y(t[1],u,c,v,d,P,T),o=r.x,a=r.y,s=Y(t[2],u,c,v,d,P,T);return{x1:n,y1:i,x2:o,y2:a,x:s.x,y:s.y}})}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var h=o(n(1)),f=o(n(5)),p=o(n(15)),d=o(n(2));function o(t){return t&&t.__esModule?t:{default:t}}var a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(v,h.default),i(v,[{key:"stringSplit",value:function(t,e){for(var n=[],i=0,r=0,o=0;o<t.length;o++){var a=t.charAt(o);if(2<encodeURI(a).length?r+=1:r+=.5,e<=r||r<e&&o===t.length-1){var s=r==e?o+1:o;n.push(t.substr(i,s-i+(r<e&&o===t.length-1?1:0))),i=o+1,r=0}}return n}}]),v);function v(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}(this,(v.__proto__||Object.getPrototypeOf(v)).call(this));i.width=n.width,i.height=n.height,i.x=n.x,i.y=n.y;var r,o=0;if(n.text){r=new h.default,i.text=new f.default(n.text,{font:n.font,color:n.color});var t=i.text.getWidth();if(t>n.width){var e=Math.round(n.text.length*n.width/t/2),a=i.stringSplit(n.text,e),s=n.lineHeight||12;o=a.length*s+6,a.forEach(function(t,e){i.text=new f.default(t,{font:n.font,color:n.color}),i.text.x=n.width/2-i.text.getWidth()/2*i.text.scaleX+(n.textX||0),i.text.y=Math.max(o,n.height)/2-10+5*i.text.scaleY+(n.textY||0)+12*e-o/2+s/2,r.add(i.text)})}else i.text.x=n.width/2-i.text.getWidth()/2*i.text.scaleX+(n.textX||0),i.text.y=n.height/2-10+5*i.text.scaleY+(n.textY||0),r.add(i.text)}if(n.bgImage){var u=SCALE_RATIO,c=new d.default(n.bgImage[0]);c.scaleX=u,c.scaleY=u,c.width=n.bgImage[1],c.height=n.bgImage[2],c.x=(i.width-c.width)/2,c.y=(i.height-c.height)/2,i.add(c)}else(n.bgColor||n.borderColor)&&(i.roundedRect=new p.default(n.width,n.autoHeight?Math.max(o,n.height):n.height,n.borderRadius,{strokeStyle:n.borderColor||"black",fillStyle:n.backgroundColor||"#F5F5F5"}),i.add(i.roundedRect));if(n.image){u=SCALE_RATIO;var l=new d.default(n.image[0]);l.scaleX=u,l.scaleY=u,l.width=n.image[1],l.height=n.image[2],l.x=(i.width-l.width)/2,l.y=(i.height-l.height)/2,i.add(l)}return r&&i.add(r),i}e.default=a},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o,a=n(0);var s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,((o=a)&&o.__esModule?o:{default:o}).default),i(u,[{key:"draw",value:function(){this.option.fillStyle&&(this.fillStyle(this.option.fillStyle),this.fillRect(0,0,this.width,this.height)),this.option.strokeStyle&&(this.strokeStyle(this.option.strokeStyle),this.strokeRect(0,0,this.width,this.height))}}]),u);function u(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));return i.width=t,i.height=e,i.option=n||{},i}e.default=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o,a=n(0);var s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,((o=a)&&o.__esModule?o:{default:o}).default),i(u,[{key:"draw",value:function(){this.beginPath(),this.arc(0,0,this.r,0,this._dp,!1),this.option.strokeStyle&&(void 0!==this.option.lineWidth&&this.lineWidth(this.option.lineWidth),this.strokeStyle(this.option.strokeStyle),this.stroke()),this.option.fillStyle&&(this.fillStyle(this.option.fillStyle),this.fill())}}]),u);function u(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));return n.option=e||{},n.r=t,n._dp=2*Math.PI,n}e.default=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o,a=n(0);var s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,((o=a)&&o.__esModule?o:{default:o}).default),i(u,[{key:"draw",value:function(){this.clear().beginPath(),this.strokeStyle(this.strokeColor),this.moveTo(this.vertex[0][0],this.vertex[0][1]);for(var t=1,e=this.vertex.length;t<e;t++)this.lineTo(this.vertex[t][0],this.vertex[t][1]);this.closePath(),this.strokeColor&&(this.strokeStyle(this.strokeColor),this.stroke()),this.fillColor&&(this.fillStyle(this.fillColor),this.fill())}}]),u);function u(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));return n.vertex=t||[],n.options=e||{},n.strokeColor=n.options.strokeColor,n.fillColor=n.options.fillColor,n}e.default=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o,a=n(0);var s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,((o=a)&&o.__esModule?o:{default:o}).default),i(u,[{key:"initVertex",value:function(){this.vertex.length=[];var t=this.num,e=this.r,n=void 0,i=void 0,r=void 0,o=void 0,a=void 0;if(t%2==0)for(i=e*Math.cos(2*Math.PI*0/t),r=e*Math.sin(2*Math.PI*0/t),this.vertex.push([i,r]),n=1;n<t;n++)o=e*Math.cos(2*Math.PI*n/t),a=e*Math.sin(2*Math.PI*n/t),this.vertex.push([o,a]);else for(i=e*Math.cos(2*Math.PI*0/t-Math.PI/2),r=e*Math.sin(2*Math.PI*0/t-Math.PI/2),this.vertex.push([i,r]),n=1;n<t;n++)o=e*Math.cos(2*Math.PI*n/t-Math.PI/2),a=e*Math.sin(2*Math.PI*n/t-Math.PI/2),this.vertex.push([o,a])}},{key:"draw",value:function(){this.beginPath(),this.moveTo(this.vertex[0][0],this.vertex[0][1]);for(var t=1,e=this.vertex.length;t<e;t++)this.lineTo(this.vertex[t][0],this.vertex[t][1]);this.closePath(),this.options.fillStyle&&(this.fillStyle(this.options.fillStyle),this.fill()),this.options.strokeStyle&&(this.strokeStyle(this.options.strokeStyle),"number"==typeof this.options.lineWidth&&this.lineWidth(this.options.lineWidth),this.stroke())}}]),u);function u(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==_typeof2(e)&&"function"!=typeof e?t:e}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));return i.num=t,i.r=e,i.options=n||{},i.vertex=[],i.initVertex(),i}e.default=s}],i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=16);function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var n,r});